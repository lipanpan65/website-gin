# Go Gin å¼€å‘ç¯å¢ƒéƒ¨ç½²æŒ‡å—

## é¡¹ç›®ç»“æ„è¯´æ˜

æœ¬é¡¹ç›®é‡‡ç”¨å¤šé¡¹ç›®å·¥ä½œåŒºç»“æ„ï¼š
```
website/                          # å·¥ä½œåŒºæ ¹ç›®å½•
â”œâ”€â”€ website-django/               # Django åç«¯é¡¹ç›®
â”œâ”€â”€ website-react/                # React å‰ç«¯é¡¹ç›®
â”œâ”€â”€ website-gin/                  # Go åç«¯é¡¹ç›®
â”‚   â”œâ”€â”€ cmd/                      # ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ config/                   # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ controllers/              # æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ routes/                   # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ middleware/               # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ internal/                 # å†…éƒ¨åŒ…
â”‚   â”œâ”€â”€ utils/                    # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ dto/                      # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”œâ”€â”€ go.mod                    # Go æ¨¡å—æ–‡ä»¶
â”‚   â”œâ”€â”€ go.sum                    # Go ä¾èµ–æ ¡éªŒæ–‡ä»¶
â”‚   â”œâ”€â”€ .tool-versions            # asdf ç‰ˆæœ¬ç®¡ç†æ–‡ä»¶
â”‚   â””â”€â”€ Makefile                  # æ„å»ºè„šæœ¬
â””â”€â”€ website.code-workspace        # VS Code/Cursor å·¥ä½œåŒºé…ç½®
```

## åŸºäºæœ¬åœ° Go ç¯å¢ƒçš„å¼€å‘éƒ¨ç½²

### ç¯å¢ƒè¦æ±‚
- Go 1.25.0+ï¼ˆæ¨èä½¿ç”¨ asdf ç‰ˆæœ¬ç®¡ç†ï¼‰
- MySQL æ•°æ®åº“ï¼ˆå…±äº« Django é¡¹ç›®æ•°æ®åº“ï¼‰
- VS Code æˆ– Cursor IDE

### å¿«é€Ÿå¼€å§‹

#### 1. å…‹éš†é¡¹ç›®å¹¶è¿›å…¥å·¥ä½œåŒºæ ¹ç›®å½•

```bash
git clone <repository-url>
cd website/website-gin
```

#### 2. é…ç½® Go ç‰ˆæœ¬ï¼ˆæ¨èä½¿ç”¨ asdfï¼‰

**å¦‚æœä½¿ç”¨ asdf ç®¡ç† Go ç‰ˆæœ¬ï¼š**
```bash
# é¡¹ç›®å·²åŒ…å« .tool-versions æ–‡ä»¶ï¼ŒæŒ‡å®š Go 1.25.0
# å¦‚æœæœªå®‰è£…è¯¥ç‰ˆæœ¬ï¼Œæ‰§è¡Œï¼š
asdf install golang 1.25.0

# éªŒè¯ç‰ˆæœ¬
go version
# åº”æ˜¾ç¤ºï¼šgo version go1.25.0 darwin/arm64

# ç¡®è®¤ asdf é…ç½®
asdf current golang
# åº”æ˜¾ç¤ºï¼šgolang  1.25.0  /path/to/website-gin/.tool-versions  true
```

#### 3. å®‰è£… Go ä¾èµ–

```bash
# ä¸‹è½½å¹¶å®‰è£…é¡¹ç›®ä¾èµ–
go mod download
go mod tidy
```

#### 4. é…ç½®æ•°æ®åº“è¿æ¥

é¡¹ç›®ä½¿ç”¨åµŒå…¥å¼é…ç½®æ–‡ä»¶ç®¡ç†ï¼Œé…ç½®æ–‡ä»¶å·²é¢„é…ç½®ã€‚

> **æ³¨æ„**ï¼šé¡¹ç›®å…±äº« Django åç«¯çš„é˜¿é‡Œäº‘ RDS MySQL æ•°æ®åº“

#### 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

**æ¨èï¼šä½¿ç”¨çƒ­é‡è½½æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡å¯ï¼‰**

```bash
# å¯åŠ¨çƒ­é‡è½½å¼€å‘æ¨¡å¼ï¼ˆæ¨èï¼‰
make watch
```

**ä¼ ç»Ÿæ–¹å¼ï¼šæ‰‹åŠ¨å¯åŠ¨**

```bash
# å¯åŠ¨å¼€å‘ç¯å¢ƒï¼ˆé»˜è®¤ï¼‰
go run cmd/main.go

# æˆ–è€…æ˜¾å¼æŒ‡å®šå¼€å‘ç¯å¢ƒ
export GO_ENV=dev
go run cmd/main.go

# å¯åŠ¨ç”Ÿäº§ç¯å¢ƒæ¨¡å¼
export GO_ENV=prod
go run cmd/main.go
```

#### 6. éªŒè¯æœåŠ¡å¯åŠ¨

æœåŠ¡å¯åŠ¨æˆåŠŸåä¼šæ˜¾ç¤ºï¼š
```
Configuration initialized: {AppMode:debug Port::9899 ...}
successfully connected to database
Database initialized
Routes initialized
Starting server on port :9899
[GIN-debug] Listening and serving HTTP on :9899
```

#### 7. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:9899

## API ç«¯ç‚¹

é¡¹ç›®å¯åŠ¨åå¯ç”¨çš„ API ç«¯ç‚¹ï¼š

### ç”¨æˆ·ç®¡ç†
- `POST /api/v1/users/` - åˆ›å»ºç”¨æˆ·
- `GET /api/v1/users/` - è·å–æ‰€æœ‰ç”¨æˆ·

### ä¸»é¢˜ç®¡ç†
- `POST /api/v1/subject/` - åˆ›å»ºä¸»é¢˜

### è¯é¢˜ç®¡ç†
- `GET /api/v1/topics/` - æŸ¥è¯¢è¯é¢˜
- `POST /api/v1/topics/` - åˆ›å»ºè¯é¢˜

## åŸºäº Docker çš„å¼€å‘ç¯å¢ƒ

### Docker ç›¸å…³å‘½ä»¤

```bash
# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
make help

# æœ¬åœ°å¼€å‘å‘½ä»¤
make watch             # å¯åŠ¨çƒ­é‡è½½å¼€å‘æ¨¡å¼ (ç›‘å¬æ–‡ä»¶å˜åŒ–è‡ªåŠ¨é‡å¯)

# Docker ç¯å¢ƒç®¡ç†
make docker-build      # æ„å»ºDockeré•œåƒ
make docker-dev        # å¯åŠ¨Dockerå¼€å‘ç¯å¢ƒ (æ„å»ºå¹¶è¿è¡Œï¼Œæ”¯æŒçƒ­åŠ è½½)
make docker-up         # å¯åŠ¨å®¹å™¨
make docker-stop       # åœæ­¢å¹¶åˆ é™¤å®¹å™¨
make docker-clean      # æ¸…ç†æ‰€æœ‰Dockerèµ„æº
make docker-logs       # æŸ¥çœ‹å®¹å™¨æ—¥å¿—
make docker-shell      # è¿›å…¥Goå®¹å™¨shell
make docker-db-shell   # è¿›å…¥æ•°æ®åº“å®¹å™¨shell
make docker-restart    # é‡å¯å¼€å‘ç¯å¢ƒ
make docker-test       # è¿è¡Œæµ‹è¯•
make docker-migrate    # è¿è¡Œæ•°æ®åº“è¿ç§»
```

### å¯åŠ¨ Docker å¼€å‘ç¯å¢ƒ

```bash
# æ„å»ºå¹¶å¯åŠ¨å®Œæ•´çš„å¼€å‘ç¯å¢ƒ
make docker-dev
```

Docker ç¯å¢ƒåŒ…å«ï¼š
- Go Gin åº”ç”¨å®¹å™¨ï¼ˆæ”¯æŒçƒ­åŠ è½½ï¼‰
- MySQL æ•°æ®åº“å®¹å™¨
- ç«¯å£æ˜ å°„ï¼š
  - Go åº”ç”¨ï¼š`http://localhost:9899`
  - MySQLï¼š`localhost:3306`

## å¼€å‘å·¥å…·å’Œé…ç½®

### VS Code/Cursor å·¥ä½œåŒºé…ç½®

1. **æ‰“å¼€å·¥ä½œåŒºæ–‡ä»¶**
   
   ä½¿ç”¨ Cursor/VS Code æ‰“å¼€ `website.code-workspace` æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åŒ…å«å¤šé¡¹ç›®é…ç½®ã€‚

2. **Go æ‰©å±•æ¨è**
   
   ç¡®ä¿å®‰è£…ä»¥ä¸‹æ‰©å±•ï¼š
   - Go (Google)
   - Go Test Explorer

#### çƒ­é‡è½½å¼€å‘æ¨¡å¼

é¡¹ç›®å·²é›†æˆ [Air](https://github.com/cosmtrek/air) çƒ­é‡è½½å·¥å…·ï¼Œæ”¯æŒä»£ç è‡ªåŠ¨é‡å¯åŠŸèƒ½ã€‚

#### 1. å®‰è£… Airï¼ˆå¦‚æœæœªå®‰è£…ï¼‰

```bash
# å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼ˆé€‚é…Go 1.25.0ï¼‰
go install github.com/air-verse/air@latest

# é‡æ–°ç”Ÿæˆ shimsï¼ˆå¦‚æœä½¿ç”¨ asdfï¼‰
asdf reshim golang

# éªŒè¯å®‰è£…
air -v
# åº”è¯¥æ˜¾ç¤ºï¼šv1.62.0, built with Go go1.25.0
```

> **âš ï¸ æ³¨æ„**ï¼šå¦‚æœé‡åˆ° `No version is set for command air` é”™è¯¯ï¼Œè¯·æŸ¥çœ‹æ•…éšœæ’é™¤éƒ¨åˆ†çš„ "Air çƒ­é‡è½½å·¥å…·æ‰¾ä¸åˆ°" è§£å†³æ–¹æ¡ˆã€‚

#### 2. å¯åŠ¨çƒ­é‡è½½æ¨¡å¼

```bash
make watch
```

#### 3. çƒ­é‡è½½ç‰¹æ€§

- **è‡ªåŠ¨ç›‘å¬**ï¼šç›‘å¬ `.go`ã€`.yaml`ã€`.yml`ã€`.json`ã€`.html` ç­‰æ–‡ä»¶å˜åŒ–
- **è‡ªåŠ¨é‡å¯**ï¼šæ–‡ä»¶å˜åŒ–æ—¶è‡ªåŠ¨é‡æ–°ç¼–è¯‘å¹¶é‡å¯åº”ç”¨
- **æ’é™¤ç›®å½•**ï¼šè‡ªåŠ¨æ’é™¤ `tmp`ã€`vendor`ã€`node_modules`ã€`.git`ã€`docs` ç­‰ç›®å½•
- **æ„å»ºæ—¥å¿—**ï¼šç¼–è¯‘é”™è¯¯ä¼šä¿å­˜åœ¨ `build-errors.log` æ–‡ä»¶ä¸­
- **å½©è‰²è¾“å‡º**ï¼šä¸åŒç±»å‹çš„æ—¥å¿—ä½¿ç”¨ä¸åŒé¢œè‰²åŒºåˆ†

#### 4. Air é…ç½®æ–‡ä»¶

é¡¹ç›®åŒ…å« `.air.toml` é…ç½®æ–‡ä»¶ï¼Œä¸»è¦é…ç½®ï¼š

```toml
[build]
  cmd = "go build -o ./tmp/main ./cmd/main.go"
  bin = "./tmp/main"
  include_ext = ["go", "tpl", "tmpl", "html", "yaml", "yml", "json"]
  exclude_dir = ["assets", "tmp", "vendor", "testdata", "node_modules", ".git", "docs"]
  exclude_regex = ["_test.go"]
```

## Goè°ƒè¯•ç¯å¢ƒé…ç½®

### ç¯å¢ƒå‡†å¤‡å’Œå®‰è£…

#### 1. å®‰è£…Delveè°ƒè¯•å™¨

**è‡ªåŠ¨å®‰è£…ï¼ˆæ¨èï¼‰ï¼š**
```bash
# ä½¿ç”¨makeå‘½ä»¤è‡ªåŠ¨å®‰è£…
make debug  # é¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨å®‰è£…dlvå¹¶æ›´æ–°asdf shims
```

**æ‰‹åŠ¨å®‰è£…ï¼š**
```bash
# å®‰è£…Delveè°ƒè¯•å™¨
go install -v github.com/go-delve/delve/cmd/dlv@latest

# å¦‚æœä½¿ç”¨asdfç®¡ç†Goç‰ˆæœ¬ï¼Œæ›´æ–°shims
asdf reshim golang

# éªŒè¯å®‰è£…
dlv version
# åº”æ˜¾ç¤ºï¼šDelve Debugger Version: 1.25.2 (latest)
```

#### 2. é¡¹ç›®è°ƒè¯•é…ç½®æ–‡ä»¶

é¡¹ç›®å·²è‡ªåŠ¨åˆ›å»ºä»¥ä¸‹è°ƒè¯•é…ç½®æ–‡ä»¶ï¼š

**`.vscode/launch.json`** - è°ƒè¯•å¯åŠ¨é…ç½®ï¼š
```json
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "ğŸš€ Go Gin Debug",
            "type": "go",
            "request": "launch",
            "mode": "debug",
            "program": "${workspaceFolder}/cmd/main.go",
            "env": {"GO_ENV": "dev"}
        },
        {
            "name": "ğŸ” Go Gin Remote Debug", 
            "type": "go",
            "request": "attach",
            "mode": "remote",
            "port": 2345,
            "host": "127.0.0.1"
        }
    ]
}
```

**`.vscode/settings.json`** - Goæ‰©å±•é…ç½®ï¼š
- è‡ªåŠ¨æ›´æ–°Goå·¥å…·
- é…ç½®Delveè°ƒè¯•å‚æ•°
- ä¼˜åŒ–è°ƒè¯•ä½“éªŒè®¾ç½®

### è°ƒè¯•æ–¹å¼

é¡¹ç›®æ”¯æŒä¸¤ç§æœ¬åœ°è°ƒè¯•æ–¹å¼ï¼š**ç›´æ¥è°ƒè¯•**å’Œ**è¿œç¨‹è°ƒè¯•**ã€‚

#### 1. ç›´æ¥è°ƒè¯•ï¼ˆæ¨èæ–°æ‰‹ï¼‰

ä½¿ç”¨Cursorå†…ç½®çš„Goè°ƒè¯•åŠŸèƒ½ï¼Œæœ€ç®€å•çš„è°ƒè¯•æ–¹å¼ã€‚

**æ­¥éª¤ï¼š**
1. åœ¨Cursorä¸­æ‰“å¼€ `website-gin` é¡¹ç›®æ–‡ä»¶å¤¹
2. åœ¨ `cmd/main.go` æˆ–å…¶ä»–Goæ–‡ä»¶ä¸­è®¾ç½®æ–­ç‚¹ï¼ˆç‚¹å‡»è¡Œå·å·¦ä¾§ï¼‰
3. æŒ‰ `F5` é€‰æ‹© `ğŸš€ Go Gin Debug`
4. åº”ç”¨ä¼šåœ¨è°ƒè¯•æ¨¡å¼ä¸‹å¯åŠ¨ï¼Œé‡åˆ°æ–­ç‚¹æ—¶è‡ªåŠ¨æš‚åœ

**ç‰¹ç‚¹ï¼š**
- ğŸŸ¢ ç®€å•æ˜“ç”¨ï¼Œä¸€é”®å¯åŠ¨
- ğŸŸ¢ æ”¯æŒæ–­ç‚¹ã€å˜é‡æŸ¥çœ‹ã€è°ƒç”¨æ ˆ
- ğŸŸ¢ å®Œå…¨é›†æˆåœ¨Cursor IDEä¸­
- ğŸŸ¢ è‡ªåŠ¨è®¾ç½®ç¯å¢ƒå˜é‡
- ğŸŸ¡ æ¯æ¬¡è°ƒè¯•éœ€è¦é‡æ–°å¯åŠ¨åº”ç”¨

**ç¤ºä¾‹è°ƒè¯•ä½ç½®ï¼š**
```go
func main() {
    // åœ¨è¿™é‡Œè®¾ç½®æ–­ç‚¹æµ‹è¯•
    config.InitConfig()  // <- ç¬¬22è¡Œï¼Œæ¨èçš„ç¬¬ä¸€ä¸ªæ–­ç‚¹ä½ç½®
    log.Printf("Configuration initialized: %+v", config.Conf)
}
```

#### 2. è¿œç¨‹è°ƒè¯•ï¼ˆæ¨èé«˜çº§ç”¨æˆ·ï¼‰

ä½¿ç”¨Delveè°ƒè¯•å™¨çš„è¿œç¨‹è°ƒè¯•åŠŸèƒ½ï¼Œæ”¯æŒçƒ­è¿æ¥è°ƒè¯•ã€‚

**æ­¥éª¤ï¼š**
1. **å¯åŠ¨è°ƒè¯•æœåŠ¡å™¨**
   ```bash
   make debug
   ```
   
   ç­‰å¾…æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼š
   ```
   ğŸ› å¯åŠ¨Go Ginæœ¬åœ°è°ƒè¯•æ¨¡å¼...
   ğŸ“ è°ƒè¯•æœåŠ¡å™¨å°†åœ¨ http://localhost:9899 å¯åŠ¨  
   ğŸ” ä½¿ç”¨Delveè°ƒè¯•å™¨ï¼Œåœ¨Cursorä¸­æŒ‰F5å¼€å§‹è°ƒè¯•
   API server listening at: [::]:2345
   warn layer=rpc Listening for remote connections (connections are not authenticated nor encrypted)
   ```

2. **è¿æ¥è°ƒè¯•å™¨**
   - åœ¨ä»£ç ä¸­è®¾ç½®æ–­ç‚¹
   - æŒ‰ `F5` é€‰æ‹© `ğŸ” Go Gin Remote Debug`
   - è°ƒè¯•å™¨è¿æ¥åˆ°è¿è¡Œä¸­çš„åº”ç”¨

3. **æ–­å¼€å’Œé‡è¿**
   - å¯ä»¥éšæ—¶æ–­å¼€è°ƒè¯•å™¨ï¼ˆåº”ç”¨ç»§ç»­è¿è¡Œï¼‰
   - éœ€è¦è°ƒè¯•æ—¶é‡æ–°è¿æ¥å³å¯

**ç‰¹ç‚¹ï¼š**
- ğŸŸ¢ æ”¯æŒçƒ­è¿æ¥/æ–­å¼€è°ƒè¯•å™¨
- ğŸŸ¢ åº”ç”¨æŒç»­è¿è¡Œï¼Œæ— éœ€é‡å¯
- ğŸŸ¢ æ”¯æŒå¤šå®¢æˆ·ç«¯åŒæ—¶è°ƒè¯•
- ğŸŸ¢ é€‚åˆé•¿æœŸå¼€å‘è°ƒè¯•
- ğŸŸ¡ éœ€è¦é¢å¤–å¯åŠ¨è°ƒè¯•æœåŠ¡å™¨

#### 3. F5æŒ‰é”®è°ƒè¯•é€‰æ‹©

**é—®é¢˜è§£å†³**ï¼šé¡¹ç›®å·²è§£å†³å¤šé¡¹ç›®å·¥ä½œåŒºä¸­F5é»˜è®¤é€‰æ‹©Djangoè°ƒè¯•çš„é—®é¢˜ã€‚

**å½“å‰è¡Œä¸º**ï¼š
- åœ¨Goé¡¹ç›®ç›®å½•ä¸­æŒ‰ `F5`ï¼šä¼˜å…ˆæ˜¾ç¤ºGoè°ƒè¯•é€‰é¡¹
- åœ¨Djangoé¡¹ç›®ç›®å½•ä¸­æŒ‰ `F5`ï¼šæ˜¾ç¤ºPython/Djangoè°ƒè¯•é€‰é¡¹
- åœ¨å·¥ä½œåŒºæ ¹ç›®å½•æŒ‰ `F5`ï¼šæ˜¾ç¤ºæ‰€æœ‰é¡¹ç›®çš„è°ƒè¯•é€‰é¡¹

### è°ƒè¯•åŠŸèƒ½è¯¦è§£

#### 1. æ–­ç‚¹åŠŸèƒ½

**è®¾ç½®æ–­ç‚¹**ï¼š
- æ™®é€šæ–­ç‚¹ï¼šåœ¨ä»£ç è¡Œå·å·¦ä¾§ç‚¹å‡»çº¢ç‚¹
- æ¡ä»¶æ–­ç‚¹ï¼šå³é”®æ–­ç‚¹è®¾ç½®æ¡ä»¶è¡¨è¾¾å¼
- æ—¥å¿—æ–­ç‚¹ï¼šè¾“å‡ºè°ƒè¯•ä¿¡æ¯è€Œä¸æš‚åœæ‰§è¡Œ

**æ–­ç‚¹ç®¡ç†**ï¼š
- æ–­ç‚¹çª—å£æŸ¥çœ‹æ‰€æœ‰æ–­ç‚¹
- æ”¯æŒå¯ç”¨/ç¦ç”¨æ–­ç‚¹
- æ”¯æŒå¯¼å…¥/å¯¼å‡ºæ–­ç‚¹é…ç½®

#### 2. å˜é‡æŸ¥çœ‹

**å˜é‡çª—å£åŠŸèƒ½**ï¼š
- è‡ªåŠ¨æ˜¾ç¤ºå½“å‰ä½œç”¨åŸŸæ‰€æœ‰å˜é‡
- æ”¯æŒå±•å¼€å¤æ‚æ•°æ®ç»“æ„ï¼ˆstructã€mapã€sliceï¼‰
- å®æ—¶å˜é‡å€¼æ›´æ–°
- æ”¯æŒå˜é‡å€¼ä¿®æ”¹ï¼ˆåœ¨æš‚åœæ—¶ï¼‰

**ç›‘è§†è¡¨è¾¾å¼**ï¼š
- æ·»åŠ è‡ªå®šä¹‰è¡¨è¾¾å¼ç›‘è§†
- æ”¯æŒå‡½æ•°è°ƒç”¨å’Œå¤æ‚è¡¨è¾¾å¼
- å®æ—¶æ±‚å€¼æ˜¾ç¤º

#### 3. è°ƒç”¨æ ˆ

**æ ˆå¸§å¯¼èˆª**ï¼š
- æŸ¥çœ‹å®Œæ•´çš„å‡½æ•°è°ƒç”¨é“¾
- ç‚¹å‡»æ ˆå¸§è·³è½¬åˆ°å¯¹åº”ä»£ç ä½ç½®
- æŸ¥çœ‹æ¯ä¸ªæ ˆå¸§çš„å±€éƒ¨å˜é‡

**åç¨‹è°ƒè¯•**ï¼š
- æ”¯æŒå¤šåç¨‹è°ƒè¯•
- å¯åœ¨ä¸åŒåç¨‹é—´åˆ‡æ¢
- æŸ¥çœ‹åç¨‹çŠ¶æ€å’Œæ ˆä¿¡æ¯

#### 4. è°ƒè¯•æ§åˆ¶

**æ‰§è¡Œæ§åˆ¶**ï¼š
- Continue (`F5`)ï¼šç»§ç»­æ‰§è¡Œç›´åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹
- Step Over (`F10`)ï¼šå•æ­¥æ‰§è¡Œï¼Œä¸è¿›å…¥å‡½æ•°
- Step Into (`F11`)ï¼šå•æ­¥æ‰§è¡Œï¼Œè¿›å…¥å‡½æ•°å†…éƒ¨
- Step Out (`Shift+F11`)ï¼šè·³å‡ºå½“å‰å‡½æ•°
- Restart (`Ctrl+Shift+F5`)ï¼šé‡å¯è°ƒè¯•ä¼šè¯
- Stop (`Shift+F5`)ï¼šåœæ­¢è°ƒè¯•

### è°ƒè¯•é…ç½®è¯´æ˜

#### 1. ç¯å¢ƒå˜é‡é…ç½®

**è‡ªåŠ¨è®¾ç½®çš„ç¯å¢ƒå˜é‡**ï¼š
- `GO_ENV=dev`ï¼šå¼ºåˆ¶ä½¿ç”¨å¼€å‘ç¯å¢ƒé…ç½®
- ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼š`config/config-dev.yaml`
- æ•°æ®åº“è¿æ¥ï¼šè‡ªåŠ¨è¿æ¥å¼€å‘ç¯å¢ƒæ•°æ®åº“

#### 2. ç«¯å£é…ç½®

**è°ƒè¯•ç›¸å…³ç«¯å£**ï¼š
- åº”ç”¨æœåŠ¡ç«¯å£ï¼š`9899` (http://localhost:9899)
- è¿œç¨‹è°ƒè¯•ç«¯å£ï¼š`2345` (Delve APIæœåŠ¡å™¨)
- æ•°æ®åº“ç«¯å£ï¼š`3306` (MySQL)

#### 3. Delveè°ƒè¯•å™¨é…ç½®

**è°ƒè¯•å™¨å‚æ•°**ï¼š
```bash
dlv debug ./cmd/main.go \
  --headless \              # æ— GUIæ¨¡å¼
  --listen=:2345 \          # ç›‘å¬ç«¯å£
  --api-version=2 \         # APIç‰ˆæœ¬
  --accept-multiclient      # æ”¯æŒå¤šå®¢æˆ·ç«¯
```

**æ€§èƒ½ä¼˜åŒ–é…ç½®**ï¼š
- `followPointers: true`ï¼šè·Ÿè¸ªæŒ‡é’ˆå¼•ç”¨
- `maxVariableRecurse: 3`ï¼šå˜é‡é€’å½’æ·±åº¦
- `maxStringLen: 400`ï¼šå­—ç¬¦ä¸²æœ€å¤§é•¿åº¦
- `maxArrayValues: 400`ï¼šæ•°ç»„æœ€å¤§å…ƒç´ æ•°
- `maxStructFields: -1`ï¼šç»“æ„ä½“å­—æ®µæ— é™åˆ¶

### å¸¸è§è°ƒè¯•åœºæ™¯

#### 1. APIè¯·æ±‚è°ƒè¯•

åœ¨è·¯ç”±å¤„ç†å‡½æ•°ä¸­è®¾ç½®æ–­ç‚¹ï¼š
```go
// åœ¨controllersä¸­è®¾ç½®æ–­ç‚¹
func GetUsers(c *gin.Context) {
    // è®¾ç½®æ–­ç‚¹æ£€æŸ¥è¯·æ±‚å‚æ•°
    users := []models.User{}  // <- æ–­ç‚¹ä½ç½®
    // ... ä¸šåŠ¡é€»è¾‘
}
```

#### 2. æ•°æ®åº“æŸ¥è¯¢è°ƒè¯•

åœ¨æ•°æ®åº“æ“ä½œå‰åè®¾ç½®æ–­ç‚¹ï¼š
```go
// åœ¨æ•°æ®åº“åˆå§‹åŒ–æ—¶è°ƒè¯•
db, err := config.InitDB()
if err != nil {
    log.Fatalf("Failed to initialize database: %v", err)  // <- æ–­ç‚¹ä½ç½®
}
```

#### 3. ä¸­é—´ä»¶è°ƒè¯•

åœ¨ä¸­é—´ä»¶å‡½æ•°ä¸­è®¾ç½®æ–­ç‚¹ï¼š
```go
// åœ¨middlewareä¸­è°ƒè¯•è¯·æ±‚å¤„ç†
func GlobalErrorHandler() gin.HandlerFunc {
    return func(c *gin.Context) {
        // è®¾ç½®æ–­ç‚¹æ£€æŸ¥è¯·æ±‚ä¿¡æ¯
        c.Next()  // <- æ–­ç‚¹ä½ç½®
    }
}
```

## å¸¸è§å¼€å‘ä»»åŠ¡

#### 1. è¿è¡Œæµ‹è¯•

```bash
# æœ¬åœ°è¿è¡Œæµ‹è¯•
go test ./...

# Docker ç¯å¢ƒè¿è¡Œæµ‹è¯•
make docker-test
```

#### 2. ä»£ç æ ¼å¼åŒ–

```bash
# æ ¼å¼åŒ–ä»£ç 
go fmt ./...

# æ•´ç†å¯¼å…¥
go mod tidy
```

#### 3. æ„å»ºé¡¹ç›®

```bash
# æœ¬åœ°æ„å»º
go build -o website-gin cmd/main.go

# è·¨å¹³å°æ„å»ºï¼ˆLinuxï¼‰
GOOS=linux GOARCH=amd64 go build -o website-gin cmd/main.go
```

## Goç‰ˆæœ¬å‡çº§æŒ‡å—

### å‡çº§åˆ°æœ€æ–°ç¨³å®šç‰ˆæœ¬

é¡¹ç›®å½“å‰ä½¿ç”¨ Go 1.25.0ï¼Œå¦‚éœ€å‡çº§åˆ°æ›´æ–°ç‰ˆæœ¬ï¼š

#### 1. æ£€æŸ¥å½“å‰ç‰ˆæœ¬å’Œå¯ç”¨ç‰ˆæœ¬

```bash
# æ£€æŸ¥å½“å‰ç‰ˆæœ¬
go version
asdf current golang

# æŸ¥çœ‹å¯ç”¨ç‰ˆæœ¬
asdf list all golang | grep -E '^[0-9]+\.[0-9]+\.[0-9]+$' | tail -10
```

#### 2. å®‰è£…æ–°ç‰ˆæœ¬

```bash
# å®‰è£…æœ€æ–°ç¨³å®šç‰ˆæœ¬ï¼ˆä¾‹å¦‚ï¼š1.25.0ï¼‰
asdf install golang 1.25.0

# æ›´æ–°é¡¹ç›®ç‰ˆæœ¬é…ç½®
# ç¼–è¾‘ .tool-versions æ–‡ä»¶
echo "golang 1.25.0" > .tool-versions

# æ›´æ–° go.mod æ–‡ä»¶
sed -i '' 's/go [0-9]\+\.[0-9]\+\.[0-9]\+/go 1.25.0/' go.mod
```

#### 3. æ›´æ–°ä¾èµ–å’Œå·¥å…·

```bash
# æ›´æ–°Goæ¨¡å—ä¾èµ–
go mod tidy
go get -u ./...

# é‡æ–°å®‰è£…Goå·¥å…·
go install github.com/air-verse/air@latest
go install -v github.com/go-delve/delve/cmd/dlv@latest

# æ›´æ–°asdf shims
asdf reshim golang
```

#### 4. éªŒè¯å‡çº§

```bash
# éªŒè¯Goç‰ˆæœ¬
go version
# åº”æ˜¾ç¤ºæ–°ç‰ˆæœ¬

# éªŒè¯å·¥å…·ç‰ˆæœ¬
air -v
# åº”æ˜¾ç¤ºï¼šv1.62.0, built with Go go1.25.0

dlv version
# åº”æ˜¾ç¤ºï¼šDelve Debugger Version: 1.25.2

# æµ‹è¯•é¡¹ç›®æ„å»º
go build -o /tmp/test-gin cmd/main.go && rm /tmp/test-gin
echo "âœ… æ„å»ºæˆåŠŸï¼"
```

#### 5. å‡çº§æ³¨æ„äº‹é¡¹

**å…¼å®¹æ€§æ£€æŸ¥**ï¼š
- æ£€æŸ¥ç¬¬ä¸‰æ–¹ä¾èµ–æ˜¯å¦æ”¯æŒæ–°ç‰ˆæœ¬Go
- è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ç¡®ä¿åŠŸèƒ½æ­£å¸¸
- æ£€æŸ¥CI/CDé…ç½®ä¸­çš„Goç‰ˆæœ¬

**å¸¸è§é—®é¢˜**ï¼š
- å¦‚æœæ„å»ºå¤±è´¥ï¼Œæ£€æŸ¥ `go mod tidy` è¾“å‡º
- å·¥å…·æ— æ³•ä½¿ç”¨æ—¶ï¼Œé‡æ–°è¿è¡Œ `asdf reshim golang`
- ä¾èµ–å†²çªæ—¶ï¼Œå¯èƒ½éœ€è¦æ‰‹åŠ¨æ›´æ–°ç‰¹å®šåŒ…ç‰ˆæœ¬

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

#### 1. é…ç½®æ–‡ä»¶æ‰¾ä¸åˆ°

**é—®é¢˜**ï¼š`pattern config-dev.yaml: no matching files found`

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿ `config/config-dev.yaml` å’Œ `config/config-prod.yaml` æ–‡ä»¶å­˜åœ¨
- æ£€æŸ¥æ–‡ä»¶æƒé™å’Œè·¯å¾„

#### 2. æ•°æ®åº“è¿æ¥å¤±è´¥

**é—®é¢˜**ï¼š`dial tcp: connect: connection refused`

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®è®¤æ•°æ®åº“æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
- æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œé˜²ç«å¢™è®¾ç½®
- éªŒè¯æ•°æ®åº“é…ç½®ä¿¡æ¯ï¼ˆç”¨æˆ·åã€å¯†ç ã€ä¸»æœºã€ç«¯å£ï¼‰

#### 3. ç«¯å£è¢«å ç”¨

**é—®é¢˜**ï¼š`bind: address already in use`

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥ç«¯å£å ç”¨ï¼š`lsof -i :9899`
- ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ç«¯å£å·
- æˆ–è€…åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹

#### 4. Go ç‰ˆæœ¬ä¸åŒ¹é…

**é—®é¢˜**ï¼š`No version is set for command go`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å®‰è£…æŒ‡å®šç‰ˆæœ¬
asdf install golang 1.22.3

# ç¡®è®¤é¡¹ç›®ç›®å½•åŒ…å« .tool-versions æ–‡ä»¶
cat .tool-versions
# åº”æ˜¾ç¤ºï¼šgolang 1.22.3
```

#### 5. Air çƒ­é‡è½½å·¥å…·æ‰¾ä¸åˆ°

**é—®é¢˜**ï¼š`No version is set for command air` æˆ– `command not found: air`

**åŸå› **ï¼šä½¿ç”¨ asdf ç‰ˆæœ¬ç®¡ç†æ—¶ï¼ŒGo å·¥å…·çš„ shims æ²¡æœ‰æ­£ç¡®æ›´æ–°

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ–¹æ³• 1ï¼šé‡æ–°ç”Ÿæˆ asdf shimsï¼ˆæ¨èï¼‰
asdf reshim golang

# æ–¹æ³• 2ï¼šéªŒè¯ air å®‰è£…
which air
# åº”è¯¥æ˜¾ç¤ºï¼š/Users/username/.asdf/shims/air

# æ–¹æ³• 3ï¼šé‡æ–°å®‰è£… airï¼ˆå¦‚æœä¸Šè¿°æ–¹æ³•æ— æ•ˆï¼‰
go install github.com/air-verse/air@latest
asdf reshim golang

# æ–¹æ³• 4ï¼šæ£€æŸ¥ Go ç‰ˆæœ¬ä¸€è‡´æ€§
asdf current golang
# ç¡®ä¿æ˜¾ç¤ºé¡¹ç›®ç›®å½•çš„ .tool-versions æ–‡ä»¶ä¸­æŒ‡å®šçš„ç‰ˆæœ¬

# æ–¹æ³• 5ï¼šæ‰‹åŠ¨éªŒè¯ air æ˜¯å¦å¯ç”¨
air -v
# åº”è¯¥æ˜¾ç¤ºï¼šv1.62.0, built with Go go1.25.0
```

**è¯¦ç»†æ•…éšœæ’é™¤æ­¥éª¤**ï¼š
1. **æ£€æŸ¥ asdf çŠ¶æ€**ï¼š`asdf current golang`
2. **éªŒè¯ air ä½ç½®**ï¼š`which air`
3. **é‡æ–°ç”Ÿæˆ shims**ï¼š`asdf reshim golang` 
4. **æµ‹è¯• air å‘½ä»¤**ï¼š`air -v`
5. **å¦‚æœä»æœ‰é—®é¢˜**ï¼šé‡æ–°å®‰è£…å¹¶é‡æ–°ç”Ÿæˆ shims

#### 6. Delveè°ƒè¯•å™¨é—®é¢˜

**é—®é¢˜**ï¼š`The "dlv" command is not available`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ–¹æ³• 1ï¼šä½¿ç”¨makeå‘½ä»¤è‡ªåŠ¨å®‰è£…ï¼ˆæ¨èï¼‰
make debug

# æ–¹æ³• 2ï¼šæ‰‹åŠ¨å®‰è£…
go install -v github.com/go-delve/delve/cmd/dlv@latest
asdf reshim golang  # å¦‚æœä½¿ç”¨asdf

# éªŒè¯å®‰è£…
dlv version
# åº”æ˜¾ç¤ºï¼šDelve Debugger Version: 1.25.2 (latest)
```

#### 7. F5è°ƒè¯•é»˜è®¤é€‰æ‹©Djangoé—®é¢˜

**é—®é¢˜**ï¼šæŒ‰F5æ—¶æ˜¾ç¤ºDjangoè°ƒè¯•é€‰é¡¹è€Œä¸æ˜¯Go

**åŸå› **ï¼šå¤šé¡¹ç›®å·¥ä½œåŒºä¸­è°ƒè¯•é…ç½®ä¼˜å…ˆçº§é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **åœ¨Goé¡¹ç›®ç›®å½•ä¸‹è°ƒè¯•**ï¼šæ‰“å¼€ `website-gin` æ–‡ä»¶å¤¹åæŒ‰F5
2. **æ£€æŸ¥é¡¹ç›®çº§é…ç½®**ï¼šç¡®è®¤ `.vscode/launch.json` å­˜åœ¨
3. **é‡æ–°åŠ è½½å·¥ä½œåŒº**ï¼šå…³é—­å¹¶é‡æ–°æ‰“å¼€Cursorå·¥ä½œåŒº

#### 8. è¿œç¨‹è°ƒè¯•è¿æ¥å¤±è´¥

**é—®é¢˜**ï¼š`Failed to connect to remote debugger`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# ç¡®è®¤è°ƒè¯•æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
make debug
# ç­‰å¾…çœ‹åˆ°ï¼šAPI server listening at: [::]:2345

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :2345

# å¦‚æœç«¯å£è¢«å ç”¨ï¼Œåœæ­¢è¿›ç¨‹æˆ–ä¿®æ”¹ç«¯å£
pkill -f dlv
```

#### 9. è°ƒè¯•æ—¶å˜é‡æ˜¾ç¤ºä¸å®Œæ•´

**é—®é¢˜**ï¼šè°ƒè¯•æ—¶å¤æ‚å˜é‡æ˜¾ç¤ºä¸º `<nil>` æˆ–ä¸å®Œæ•´

**è§£å†³æ–¹æ¡ˆ**ï¼š
- é¡¹ç›®å·²ä¼˜åŒ–Delveé…ç½®å‚æ•°
- æ”¯æŒæ›´æ·±å±‚å˜é‡é€’å½’æŸ¥çœ‹
- å¦‚ä»æœ‰é—®é¢˜ï¼Œåœ¨ `.vscode/settings.json` ä¸­è°ƒæ•´ï¼š
```json
{
  "go.delveConfig": {
    "dlvLoadConfig": {
      "maxVariableRecurse": 5,
      "maxStringLen": 800
    }
  }
}
```

#### 6. çƒ­é‡è½½ä¸å·¥ä½œ

**é—®é¢˜**ï¼šæ–‡ä»¶ä¿®æ”¹ååº”ç”¨æ²¡æœ‰è‡ªåŠ¨é‡å¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥ Air é…ç½®æ–‡ä»¶
cat .air.toml

# ç¡®è®¤ç›‘å¬çš„æ–‡ä»¶ç±»å‹å’Œç›®å½•
# æ£€æŸ¥ tmp ç›®å½•æƒé™
ls -la tmp/

# é‡æ–°å¯åŠ¨ Air
make watch
```

## é¡¹ç›®ç‰¹æ€§

### 1. çƒ­é‡è½½æ”¯æŒ

Docker å¼€å‘ç¯å¢ƒæ”¯æŒä»£ç çƒ­é‡è½½ï¼Œä¿®æ”¹ä»£ç ååº”ç”¨ä¼šè‡ªåŠ¨é‡å¯ã€‚

### 2. æ•°æ®åº“å…±äº«

ä¸ Django é¡¹ç›®å…±äº«åŒä¸€ä¸ª MySQL æ•°æ®åº“ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚

### 3. ç¯å¢ƒé…ç½®ç®¡ç†

æ”¯æŒå¤šç¯å¢ƒé…ç½®ï¼Œé€šè¿‡ `GO_ENV` ç¯å¢ƒå˜é‡åˆ‡æ¢ï¼š
- `dev`ï¼šå¼€å‘ç¯å¢ƒï¼ˆé»˜è®¤ï¼‰
- `prod`ï¼šç”Ÿäº§ç¯å¢ƒ

### 4. ä¸­é—´ä»¶æ”¯æŒ

é¡¹ç›®åŒ…å«å…¨å±€å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶ï¼Œç¡®ä¿é”™è¯¯ç»Ÿä¸€å¤„ç†ã€‚

## éƒ¨ç½²æ³¨æ„äº‹é¡¹

1. **ç”Ÿäº§ç¯å¢ƒ**ï¼šè®°å¾—è®¾ç½® `GO_ENV=prod` ç¯å¢ƒå˜é‡
2. **æ•°æ®åº“**ï¼šç¡®ä¿ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“é…ç½®æ­£ç¡®ä¸”å®‰å…¨
3. **ç«¯å£**ï¼šç¡®è®¤ç”Ÿäº§ç¯å¢ƒç«¯å£é…ç½®ä¸å†²çª
4. **æ—¥å¿—**ï¼šç”Ÿäº§ç¯å¢ƒå»ºè®®é…ç½®æ—¥å¿—è½®è½¬å’ŒæŒä¹…åŒ–å­˜å‚¨
